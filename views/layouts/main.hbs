<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>Galeria 15 de Nahiara</title>
</head>

<body>
    <div class="container-fluid text-center py-5 px-0 mx-0">

        <img src="./img/Grupo04-removebg-preview.png" class="mx-auto p-0 m-0" width="300px" height="auto"  data-aos="flip-left"
        data-aos-easing="ease-out-cubic"
        data-aos-duration="2000"/>
        <h1 id="title1" class="title m-0 p-0 fw-bold mt-2" style='font-size: 25px; color:#b5976b; font-family: Rosela'>Mis 15</h1>
        <img class="p-0 m-0" width="200px" height="auto" src="./img/goldd.png"/>
        <h2 class="h22 fw-bold mt-3" style='color:#b5976b'>Gloria Nahiara Hajduczyk Boyko</h2>

        <!-- Decoracion Lineas -->
        <img class="p-0 m-0" src="./img/lineas01.svg">

        <h3 class="mt-4" style='font-size: 25px; font-family: Rosela'>- Galeria de Fotos -</h3>
        <p style='font-size: 22px; font-family: Rosela'>
            Descargá las fotos que más te gusten y compartí las que quieras para que todos podamos acceder a ellas :)
        </p>
        <span class="pb-2 fw-lighter">Subí hasta 10 fotos</span>

        <form class="row mx-auto  px-3 px-sm-5" action="http://localhost:3000/images/multi" method="post" enctype="multipart/form-data">
            <!-- Agregar una clase "photo-upload" para manejar la carga de fotos -->
            <div class="col-12 mx-auto mt-sm-4 mt-2 mb-sm-2 mb-1 photo-upload text-center">
                <label for="photos" class="img img-container d-flex justify-content-center align-items-center" style='cursor: pointer; font-family: Rosela; font-size: 20px; color:#E88BD6'>
                    <input type="file" name="photos" id="photos" style='display: none' accept='image' multiple="true"/>
                    Eligí las fotos que más te gusten y subilas!
                    <img class="img-shadow" width="35px" src="./img/images.svg" style='margin-left: 7px; margin-right: 7px; background-color: #EEE5ED; border-radius: 15%; padding:5px; box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px'/>
                </label>
            </div>

            <!-- Botón para confirmar la subida de fotos -->
            <div class="col-12 mx-auto">
                <input type="submit" id="confirmUpload" class="btn btn-primary mx-auto" style='display: none' value="Compartir estas fotos">
            </div>
        </form>

        <!-- Grid Fotos -->
        <div class="row mx-auto  px-3 px-sm-5 mt-4">
            {{#each files}}
            
            <div class="col-lg-4 col-sm-6 col-md-6 mx-auto my-sm-4 my-2">
                <img class="img img-container" width="100%" src="../../{{this}}" style="height: 250px;"/>
            </div>

            {{/each}}
        </div>
    </div>

    <!-- Decoracion Footer -->
    <img class="p-0 m-0" src="./img/img_ondas04.svg" width="100">

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const maxPhotos = 10; // Máximo de fotos por persona
            let photoCount = 0;

            // Agregar un evento de cambio de archivo para el input de carga de fotos
            document.getElementById('photos').addEventListener('change', function (event) {
                const files = event.target.files;
                if (files.length > 0) {
                    // Verificar si la persona ha alcanzado el límite de carga de fotos
                    if (photoCount < maxPhotos) {
                        // Mostrar el botón para confirmar la subida de fotos
                        document.getElementById('confirmUpload').style.display = 'block';
                    } else {
                        alert('Has alcanzado el límite máximo de fotos permitidas.');
                    }
                }
            });

            // Agregar un evento de clic para el botón de confirmar la subida de fotos
            document.getElementById('confirmUpload').addEventListener('click', function () {
                const files = document.getElementById('photos').files;
                if (files.length > 0) {
                    // Seleccionar el contenedor de fotos existente donde deseas agregar la nueva foto
                    const photoContainer = document.querySelector('.row.mx-auto.px-3.px-sm-5');

                    // Crear un nuevo div para la nueva foto
                    const newPhotoDiv = document.createElement('div');
                    newPhotoDiv.classList.add('col-lg-4', 'col-sm-12', 'col-md-6', 'mx-auto', 'my-sm-4', 'my-2');

                    // Crear un elemento de imagen para la nueva foto
                    const newImg = document.createElement('img');
                    newImg.classList.add('img', 'img-fluid');
                    newImg.width = '100%';
                    newImg.src = URL.createObjectURL(files[0]);

                    // Agregar la nueva imagen al nuevo div
                    newPhotoDiv.appendChild(newImg);

                    // Insertar el nuevo div en el contenedor de fotos
                    photoContainer.appendChild(newPhotoDiv);

                    // Ocultar el botón de confirmar la subida de fotos después de la subida
                    document.getElementById('confirmUpload').style.display = 'none';
                }
            });
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>